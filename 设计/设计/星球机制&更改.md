# 星球机制&更改
## 势力辐射
 _(可以用做新游戏的规则设想)_
  
 **主线和支线关卡不受该机制影响**
1.  基地区块势力范围会辐射,根据不同的难度等级,有不同的辐射范围,以一个区块半径为一单位辐射范围:  

|难度  | 范围  |
|:---:|---| 
|低度&中度|1|
|高度&极高|2|
|毁灭|3|

2.  玩家初到被势力辐射的非基地区块,会进行防守,根据不同的辐射程度,会受到不同程度的难度定义,遵循一下规则:
- 所有区块的辐射难度,不超过最高的基地难度
- 将受势力辐射的程度,定义为威胁度,每种难度的敌方基地辐射的程度,随距离增大而减弱,具体:  

| 难度↓威胁度↘️半径→  | 半径1  | 半径2  | 半径3  |  
|:---|:---:|:---:|:---:|
|低度&中度|1|null|null|
|高度&极高|2|1|null|
|毁灭|4|2|1|  
_根据威胁度计算难度：_  

|难度  | 低度  |中度|高度|极高|毁灭|
|:---:|:---:|:---:|:---:|:---:|:---:|
|威胁度|1|2|3|5|6|

- 若玩家到没有任何威胁度的区块,区块默认被直接占领
## 索敌机制
大致与原版一致，遵循加分索敌机制
### 优先级分数
单位或炮台的索敌，主要根据优先级算法，计算某个 **在攻击范围内**的目标的优先级分数。单位炮台会锁定分数最高的目标进行攻击。若遇到分数相同的情况，则随机选择其中一个为目标
#### 算法
根据玩家或默认的优先级排序，若单位符合优先级的条件，就会给单位加不同的分数，优先级越高，加分越多  
大致分为8个优先级位次，每个位次的加分数从$2^8$→$2^1$依次指数递减，单位符合优先级条件或未设置优先级会给单位加分  
优先级分数→$Y_n$$（n=1，2，3...）$
总分→$S$
$$
S=\sum_{n=1}^8 Y_n
$$
### 嘲讽机制
_不会对玩家“附身”的单位生效_  
嘲讽可以影响单位和炮台的索敌，嘲讽在超过单位或炮台**抗诱力**的时候，攻击优先级会被覆盖，单位或炮台会的索敌会被转移到**嘲讽度**最高的单位
#### 名词概念
- 迷惑力（诱惑力）：单位和建筑的固有属性，用于描述对敌方目标的嘲讽能力，通常多数单位该值为零  
- 抗诱力：单位和炮台固有属性，用于描述抵抗被嘲讽的能力  
- 嘲讽度：由迷惑力计算而来的数据，与抗诱力直接对比
_这些数值不会显示在面板上_
#### 算法     
被迷惑对象索敌范围内出现施加迷惑的单位或建筑，才会进行下面的判断  
A为被迷惑对象，B为施加迷惑的对象
定义计算符号： 
- A的抗诱力→K（抗） 
- A的向量坐标→ $\vec{A}$
- A的移动速度向量或炮台的朝向向量→$\vec V$
- B的迷惑力→M（迷）     
- B的向量坐标→ $\vec{B}$   
- 嘲讽度→C（嘲）   
- 方向影响因素→D  
- 距离影响因素→J（距）
- AB相对方向→$\vec{C}$
- A的索敌范围→$F$（范） 
$$
\vec{C}=\vec{A}-\vec{B}\\
$$
$D$用cos计算方向因素
$$
D=\cos＜\vec{V},\vec{C}＞+2
$$
$J$的特殊算法，结合贝塞尔曲线计算  
具体参考下图，其中x轴为 $|\vec C|$（距离），轴为 $J$
![[IMG_20240725_221610.jpg]]
$A_1$点固定为（5($x_1$)，1.5）
$A_4$点y轴固定为0，x轴为以下算法
$$
x_4=3\cdot\sqrt F+120
$$
$A_2$点y轴固定为1.5，x轴为以下算法
$$
x_2=\frac{2}{3}\cdot（x_4+x_1）
$$
$A_3$点y轴固定为0，x轴为以下算法
$$
x_3=\frac{1}{3}\cdot（x_4+x_1）
$$
嘲讽度算法
$$
C=D\cdot J\cdot M-K
$$
若C＞0，则给单位加分，反之则不加
### 最终分数
最终分数$E$是单位炮台索敌的最终根据，公式：
$$
E=S+C
$$

## 伤害计算

## 基础环境系统
包括温度湿度光照
## 不可视域
通过控制光路，造出不可视领域，敌方多使用，纳米科技后

## 单位容量共享
更改原版的单位容量独立，现所有单位共享容量，而容纳较低等级单位的数量将翻3倍，同种单位过多，该单位需要的容纳量越多
## 核心更改
核心共有5等级之多，可能还会有更加高级的核心  
每种核心都对应着一种玩家操控单位_（以下称玩家单位）_    
在有对应核心的前提下，玩家可以自由选择自己需要的操作的单位  
不论拥有什么类型的核心，在核心等级2级以后，都可以选择并操控侦查无人机
### 核心专业化
即对核心分类，不同类别的核心有不同的主要功能，分为以下几种：
1. **仓库核心** _（工业核心）_   
- 物品容量较大，但能提供的单位容量较少，生命值适中
- 对应单位为建造型单位，其功能主要是建造，几乎没有攻击性，会被攻击，有治疗功能
2. **军事核心** _（重装核心）_  
- 物品容量较小，但能提供大量单位容量，生命值较高
- 对应单位为攻击型单位，其主要功能是临时防守，并不能作为很强的单位，强度低于目前等级，建造速度一般
3. **前哨核心** _（前哨站）_  
- 建造速度快，物品容量小，不提供单位容量，生命值低
- 对应单位为侦查型单位，飞行高度高，不会被攻击，但建造速度甚至比攻击型单位弱，没有任何攻击性 *（在洞穴中无法使用该单位）*
### 


