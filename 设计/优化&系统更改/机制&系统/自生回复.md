# 自生回复
自生合金建造的单位建筑的特殊属性，一定限度内会为单位提供自动恢复
### 愈伤值
自生单位建筑自带的属性，字面愈合伤口
#### 决定因素
- 愈伤值由建造单位建筑时用的**自生合金**数量决定，一个自生合金对应一点愈伤值 
- 愈伤值是独立于单位生命值的数值，仅能被一些特殊攻击和debuff降低，不可恢复  
此外，所有自生合金的单位建筑，在 **恢复量超过自身生命的150% 并 这一期间没有受到过任何除本体以外的治疗（包括自带的治疗效果）** 时，会产生**瘤变效应**，将固定扣除20%的愈伤值
#### 主要用途
- 拥有愈伤值的单位，会缓慢恢复自身血量，但这个恢复量由上限，治疗达到一定生命值后将不再恢复。这个上限会随着愈伤值的降低而降低，具体算法为：  
$$
生命值恢复比率上限=\frac{愈伤值}{愈伤值上限}
$$
- 恢复速率受单位建筑的内因影响（当前愈伤值和生命值），还受环境外因影响（温度，湿度，光照）具体算法：  
生命愈伤比 $R$  
生命愈伤比是目前生命值占比于目前愈伤值占比的比，即$$生命愈伤比R=\frac {当前生命值\cdot愈伤值上限}{当前愈伤值\cdot生命值上限}$$
恢复系数 $K$  （内因）  
仿照生物增长的S形曲线，速率呈向下的弧形即可达到类似效果，即

温度系数 $T$  
独立于其他建筑的算法，具体转到 [热量&环境](热量&环境.md)

恢复速率 $V$ (单位：x%生命值/s)  
水分系数 $W$  
光照系数 $L$  


$$
V=T\cdot W\cdot (L+1)\cdot K
$$
文字：
$$
恢复速率=温度系数\cdot W
